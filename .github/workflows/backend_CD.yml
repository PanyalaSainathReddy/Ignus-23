name: Backend CD  

on: 
    push:
        branches: 
            - main

jobs:
    production-deploy:
        runs-on: ubuntu-latest
        steps:
            - name: Setup an SSH connnection 
              uses: appleboy/ssh-action@master
              with:
                host: ${{ secrets.HOST }}
                username: ${{ secrets.USERNAME }}
                key: ${{ secrets.KEY }}

            - name: Deploy to production
              run: | 
                cd /home/kunaltiwari/Ignus-23
                git pull origin main
                docker-compose build
                docker-compose up -d 
